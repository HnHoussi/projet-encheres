<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
    <meta charset="UTF-8">
    <title>ENI-Ench√®res</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.3/dist/sketchy/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/css/view-acceuil-encheres.css}">

</head>
<body class="container mt-4">

    <!-- Header -->
    <div class="header-container">
        <a th:href="@{/encheres}" class="text-decoration-none text-dark"><h1>ENI-Ench√®res</h1></a>
        <a th:href="@{utilisateur/connexion}" class="btn btn btn-outline-dark">S'inscrire - Se connecter</a>
    </div>

    <h2 style="text-align: center">Liste des ench√®res</h2>

    <!-- Formulaire de recherche -->
    <div class="filters-section">
        <h3>Filtres :</h3>
        <form th:action="@{/encheres}" method="get" class="row g-2">
            <div class="col-md-4">
                <div class="input-group">
                    <span class="input-group-text">üîç</span>
                    <input type="text" id="motClesEnchere" name="motClesEnchere"
                           class="form-control"
                           placeholder="Le nom de l'article contient"
                           th:value="${motClesEnchere}">
                </div>
            </div>

            <div class="col-md-3">
                <select id="idCategorie" name="idCategorie" class="form-select">
                    <option value="">Toutes les cat√©gories</option>
                    <option th:each="cat : ${categoriesEnSession}"
                            th:value="${cat.idCategorie}"
                            th:text="${cat.libelle}"
                            th:selected="${idCategorie} == ${cat.idCategorie}">
                    </option>
                </select>
            </div>

            <div class="col-md-2">
                <button type="submit" class="btn btn-primary">Rechercher</button>
            </div>
        </form>
    </div>

    <!-- Liste des ench√®res -->
    <div class="encheres-grid" th:if="${listEncheres != null and !listEncheres.isEmpty()}">
        <div class="enchere-card card border-primary" th:each="enchere : ${listEncheres}">
            <div class="enchere-image">
                <img th:src="@{'/images/' + ${#strings.toLowerCase(#strings.replace(enchere.article.nomArticle, ' ', '-'))} + '.jpg'}"
                                            th:alt="${enchere.article.nomArticle}"
                                            class="img-fluid">
            </div>
            <h5 th:text="${enchere.article.nomArticle}">Nom Article</h5>
            <p>Prix : <span th:text="${enchere.montantEnchere}">0</span> points</p>
            <p>Fin de l'ench√®re : <span th:text="${#temporals.format(enchere.dateEnchere, 'dd/MM/yyyy')}">Date</span></p>
            <p>Vendeur : <span th:text="${enchere.utilisateur.pseudo}">Pseudo</span></p>
        </div>
    </div>

    <!-- Alerte si aucune ench√®re -->
    <div class=" no-encheres alert alert-warning" th:if="${listEncheres == null or listEncheres.isEmpty()}">
        Aucun r√©sultat pour cette recherche.
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
