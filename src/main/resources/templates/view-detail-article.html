<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Détail vente - ENI-Enchères</title>
    <!-- Bootswatch Sketchy Theme -->
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.3/dist/sketchy/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
</head>
<style>
    html, body {
        height: 100%;
    }
    body {
        display: flex;
        flex-direction: column;
    }
    main {
        flex: 1;
    }
</style>
<body>
    <div class="container">
        <nav class="navbar navbar-expand-lg bg-body-tertiary my-4">
            <div class="container">
                <a th:href="@{/encheres}" class="navbar-brand">ENI-Enchères</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor04"
                        aria-controls="navbarColor04" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarColor04">
                    <ul th:if="${true}" class="navbar-nav ms-auto">
                        <li class="nav-item"><a th:href="@{/encheres}" class="nav-link">Enchères</a></li>
                        <li class="nav-item"><a th:href="@{/encheres/vendre-article}" class="nav-link">Vendre un article</a></li>
                        <li class="nav-item"><a th:href="@{/mon-profil}" class="nav-link">Mon profil</a></li>
                        <li class="nav-item"><a th:href="@{/encheres}" class="nav-link">Déconnexion</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Main Row: Image left, details right -->
        <div class="row">
            <h2 class="mb-4 text-center">Détail vente</h2>

            <!-- Left Column - Image -->
            <div class="col-md-4 text-center mb-4 mb-md-0">
                <div class="border rounded overflow-hidden" style="width: 250px; height: auto; margin-left: auto; margin-right: auto;">
                    <img
                            th:src="@{'/images/' + ${#strings.toLowerCase(#strings.replace(article.nomArticle, ' ', '-'))} + '.jpg'}"
                            alt="Image de l'article"
                            class="img-fluid" />
                </div>
            </div>

            <!-- Right Column - Article Details -->
            <div class="col-md-8">

                <!-- Article Name -->
                <div class="mb-3">
                    <h4 th:text="${article.nomArticle}">PC Gamer pour travailler</h4>
                </div>

                <!-- Description -->
                <div class="mb-3 row">
                    <label class="col-sm-3 col-form-label fw-bold">Description :</label>
                    <div class="col-sm-9">
                        <p th:text="${article.description}" class="form-control-plaintext">
                            Description de l'article...
                        </p>
                    </div>
                </div>

                <!-- Category -->
                <div class="mb-3 row">
                    <label class="col-sm-3 col-form-label fw-bold">Catégorie :</label>
                    <div class="col-sm-9">
                        <span th:text="${article.categorie.libelle}" class="form-control-plaintext">Informatique</span>
                    </div>
                </div>

                <!-- Best Offer -->
    <!--            <div class="mb-3 row">-->
    <!--                <label class="col-sm-3 col-form-label fw-bold">Meilleure offre :</label>-->
    <!--                <div class="col-sm-9">-->
    <!--                    <span th:if="${article.meilleureOffre != null}" th:text="${article.meilleureOffre + ' pts par ' + article.acheteur.pseudo}" class="form-control-plaintext">210 pts par Bob</span>-->
    <!--                    <span th:unless="${article.meilleureOffre != null}" class="form-control-plaintext">Aucune offre</span>-->
    <!--                </div>-->
    <!--            </div>-->

                <!-- Starting Price -->
                <div class="mb-3 row">
                    <label class="col-sm-3 col-form-label fw-bold">Mise à prix :</label>
                    <div class="col-sm-9">
                        <span th:text="${article.miseAPrix + ' points'}" class="form-control-plaintext">185 points</span>
                    </div>
                </div>

                <!-- End Date -->
                <div class="mb-3 row">
                    <label class="col-sm-3 col-form-label fw-bold">Fin de l'enchère :</label>
                    <div class="col-sm-9">
                        <span th:text="${#temporals.format(article.dateFinEnchere, 'dd/MM/yyyy')}" class="form-control-plaintext">09/10/2018</span>
                    </div>
                </div>

                <!-- Pickup Address -->
                <div class="mb-3 row" th:if="${article.retrait != null}">
                    <label class="col-sm-3 col-form-label fw-bold">Retrait :</label>
                    <div class="col-sm-9">
                        <div class="form-control-plaintext">
                            <div th:text="${article.retrait.rue}">10 allée des Alouettes</div>
                            <div>
                                <span th:text="${article.retrait.codePostal}">44800</span>
                                <span th:text="${article.retrait.ville}">Saint Herblain</span>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Seller -->
                <div class="mb-4 row">
                    <label class="col-sm-3 col-form-label fw-bold">Vendeur :</label>
                    <div class="col-sm-9">
                        <span th:text="${article.utilisateur.pseudo}" class="form-control-plaintext">jojo44</span>
                    </div>
                </div>

                <!-- Bid Section (only show if auction is active) -->
    <!--            <div th:if="${article.dateFinEnchere > #temporals.createNow()}" class="mb-4">-->
    <!--                <form th:action="@{/encherir}" method="post" class="d-flex align-items-center gap-3">-->
    <!--                    <input type="hidden" name="idArticle" th:value="${article.idArticle}" />-->
    <!--                    <label for="montantEnchere" class="fw-bold">Ma proposition :</label>-->
    <!--                    <div class="position-relative">-->
    <!--                        <input type="number" id="montantEnchere" name="montantEnchere" class="form-control pe-5"-->
    <!--                               th:min="${article.meilleureOffre != null ? article.meilleureOffre + 1 : article.miseAPrix + 1}"-->
    <!--                               step="1" required style="width: 120px;" />-->
    <!--                        <span class="position-absolute top-50 end-0 translate-middle-y pe-3 text-muted">€</span>-->
    <!--                    </div>-->
    <!--                    <button type="submit" class="btn btn-outline-dark">Enchérir</button>-->
    <!--                </form>-->
    <!--            </div>-->


            </div>
                <!-- Back & Bid Buttons -->
                <div class="d-flex justify-content-center gap-3 mt-4">
                    <a href="/encheres" class="btn btn-outline-dark px-4">
                        <i class="fas fa-arrow-left"></i> Retour aux enchères
                    </a>
                    <a href="/encherir" class="btn btn-dark px-4">
                        <i class="fas fa-gavel"></i> Enchérir
                    </a>
                </div>
        </div>
    </div>
    <footer class="footer mt-auto py-3">
        <div class="container text-center">
            <p class="mb-0 small">
                Aide | Conditions d’utilisation | Contact e-mail | Mentions légales | Suivez-nous : @instagram | <em>Projet ENI Informatique</em>
            </p>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>